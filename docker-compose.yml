version: '3.8'

services:
  bot:
    build: .
    restart: unless-stopped
    network_mode: host  # Use host networking to access ComfyUI
    user: "${CURRENT_UID:-1000}:${CURRENT_GID:-1000}"  # Use host user's UID/GID
    volumes:
      - ./.env:/app/.env:ro
      - ./sessions:/app/sessions
      - ./temp:/app/temp
      - /storage/comfyui/input:/storage/comfyui/input
      - /storage/comfyui/output:/storage/comfyui/output
      - /var/run/docker.sock:/var/run/docker.sock  # Docker socket for container management 